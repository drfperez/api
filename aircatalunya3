<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <style> body {
  font-family: Arial, sans-serif;
  text-align: center;
  background-color: #f2f2f2;
}

h1 {
  color: #333333;
  margin: 30px 0;
}

#formulario {
  margin: 0 auto;
  text-align: left;
  display: flex;
  justify-content: space-between;
}

#estaciones {
  width: 45%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
  background-color: #ffffff;
}

#formulario label {
  font-weight: bold;
  color: #333333;
}

#formulario input[type="date"] {
  width: 45%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
  background-color: #ffffff;
}

#formulario input[type="submit"] {
  width: 10%;
  background-color: #4caf50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

#formulario input[type="submit"]:hover {
  background-color: #45a049;
}

/* Add a media query to make the form responsive */
@media screen and (max-width: 600px) {
  #formulario {
    flex-direction: column;
    align-items: center;
  }
  #estaciones, #formulario input[type="date"] {
    width: 90%;
  }
  #formulario input[type="submit"] {
    width: 40%;
  }
}


</style>
    <title>Estaciones de Medición de Contaminación</title>
  </head>
  <body>
    <h1>Estaciones de Medición de Contaminación</h1>
    <form id="formulario">
      <label for="estaciones">Selecciona una estación:</label><br>
      <select id="estaciones">
        <option value="Agullana">Agullana</option>
        <option value="Alcanar">Alcanar</option>
      <option value="Alcover">Alcover</option>
      <option value="Amposta">Amposta</option>
      <option value="Badalona">Badalona</option>
      <option value="Barberà del Vallès">Barberà del Vallès</option>
      <option value="Barcelona (Ciutadella)">Barcelona (Ciutadella)</option>
      <option value="Barcelona (Eixample)">Barcelona (Eixample)</option>
      <option value="Barcelona (Gràcia - Sant Gervasi)">Barcelona (Gràcia - Sant Gervasi)</option>
      <option value="Barcelona (Observatori Fabra)">Barcelona (Observatori Fabra)</option>
      <option value="Barcelona (Palau Reial)">Barcelona (Palau Reial)</option>
      <option value="Barcelona (Parc Vall Hebron)">Barcelona (Parc Vall Hebron)</option>
      <option value="Barcelona (Poblenou)">Barcelona (Poblenou)</option>
      <option value="Barcelona (Sants)">Barcelona (Sants)</option>
      <option value="Begur">Begur</option>
      <option value="Bellver de Cerdanya">Bellver de Cerdanya</option>
      <option value="Berga">Berga</option>
      <option value="Constantí">Constantí</option>
      <option value="Cubelles (Poliesportiu)">Cubelles (Poliesportiu)</option>
      <option value="El Prat de Llobregat (Jardins de la Pau)">El Prat de Llobregat (Jardins de la Pau)</option>
      <option value="El Prat de Llobregat (Sagnier)">El Prat de Llobregat (Sagnier)</option>
      <option value="Els Guiamets">Els Guiamets</option>
      <option value="Flix">Flix</option>
      <option value="Gandesa">Gandesa</option>
      <option value="Gavà">Gavà</option>
      <option value="Girona (Escola de Música)">Girona (Escola de Música)</option>
      <option value="Granollers">Granollers</option>
      <option value="Igualada">Igualada</option>
      <option value="Juneda (Pla del Molí)">Juneda (Pla del Molí)</option>
      <option value="L'Ametlla de Mar">L'Ametlla de Mar</option>
      <option value="L'Hospitalet de Llobregat">L'Hospitalet de Llobregat</option>
      <option value="La Sénia">La Sénia</option>
      <option value="Lleida">Lleida</option>
      <option value="Manlleu">Manlleu</option>
      <option value="Manresa">Manresa</option>
      <option value="Martorell">Martorell</option>
      <option value="Mataró">Mataró</option>
      <option value="Mollet del Vallès">Mollet del Vallès</option>
      <option value="Montcada i Reixac">Montcada i Reixac</option>
      <option value="Montcada i Reixac (Can Sant Joan)">Montcada i Reixac (Can Sant Joan)</option>
      <option value="Montsec">Montsec</option>
      <option value="Montseny (La Castanya)">Montseny (La Castanya)</option>
      <option value="Pallejà (Roca de Vilana)">Pallejà (Roca de Vilana)</option>
      <option value="Pardines">Pardines</option>
      <option value="Perafort (Puigdelfí)">Perafort (Puigdelfí)</option>
      <option value="Ponts">Ponts</option>
      <option value="Reus">Reus</option>
      <option value="Rubí">Rubí</option>
      <option value="Sabadell">Sabadell</option>
      <option value="Sant Adrià de Besòs">Sant Adrià de Besòs</option>
      <option value="Sant Andreu de la Barca">Sant Andreu de la Barca</option>
      <option value="Sant Celoni">Sant Celoni</option>
      <option value="Sant Cugat del Vallès">Sant Cugat del Vallès</option>
      <option value="Sant Vicenç dels Horts">Sant Vicenç dels Horts</option>
      <option value="Sant Vicenç dels Horts (Ribot)">Sant Vicenç dels Horts (Ribot)</option>
      <option value="Santa Coloma de Gramenet">Santa Coloma de Gramenet</option>
      <option value="Santa Maria de Palautordera">Santa Maria de Palautordera</option>
      <option value="Santa Pau">Santa Pau</option>
      <option value="Santa Perpètua de Mogoda">Santa Perpètua de Mogoda</option>
      <option value="Sort">Sort</option>
      <option value="Sta. Margarida i els Monjos (La Ràpita)">Sta. Margarida i els Monjos (La Ràpita)</option>
      <option value="Tarragona (Bonavista)">Tarragona (Bonavista)</option>
      <option value="Tarragona (Parc de la Ciutat)">Tarragona (Parc de la Ciutat)</option>
      

      <option value="Tarragona (Sant Salvador)">Tarragona (Sant Salvador)</option>
      <option value="Tarragona (Universitat Laboral)">Tarragona (Universitat Laboral)</option>
      <option value="Terrassa">Terrassa</option>
      <option value="Tona (Zona Esportiva)">Tona (Zona Esportiva)</option>
      <option value="Vandellòs (Barranc del Terme)">Vandellòs (Barranc del Terme)</option>
      <option value="Vandellòs (Els Dedalts)">Vandellòs (Els Dedalts)</option>
      <option value="Vandellòs (Viver)">Vandellòs (Viver)</option>
      <option value="Vic">Vic</option>
      <option value="Vila-seca (IES Vila-seca)">Vila-seca (IES Vila-seca)</option>
      <option value="Viladecans - Atrium">Viladecans - Atrium</option>
      <option value="Vilafranca del Penedès">Vilafranca del Penedès</option>
      <option value="Vilanova i la Geltrú">Vilanova i la Geltrú</option>


        
      </select><br>
      <label for="fecha">Selecciona una fecha:</label><br>
      <input type="date" id="fecha" value="2023-01-01"><br>
      <button type="button" onclick="mostrarContaminantes()">Mostrar contaminantes</button>
    </form>
    <div id="resultado"></div>

    <script>
      async function obtenerContaminantes(estacion, fecha) {
        const response = await fetch(`https://analisi.transparenciacatalunya.cat/resource/tasf-thgu.json?nom_estacio=${estacion}&data=${fecha}`);
        return await response.json();
      }

      async function mostrarContaminantes() {
  const estacion = document.getElementById("estaciones").value;
  const fecha = document.getElementById("fecha").value;
  const contaminantes = await obtenerContaminantes(estacion, fecha);

  let tabla = `<table>`;
  tabla += `<tr>`;
  // agregar las claves o keys como cabeceras de la tabla
  for (const key in contaminantes[0]) {
    tabla += `<th>${key}</th>`;
  }
  tabla += `</tr>`;

  for (const contaminante of contaminantes) {
    tabla += `<tr>`;
    for (const key in contaminante) {
      tabla += `<td>${contaminante[key]}</td>`;
    }
    tabla += `</tr>`;
  }
  tabla += `</table>`;

  document.getElementById("resultado").innerHTML = tabla;
}
document.getElementById("formulario").addEventListener("submit", function(event) {
  event.preventDefault();
  mostrarContaminantes();
});
    </script>
  </body>
</html>
